<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lazy.vm.mapper.ChapterMapper">

    <resultMap type="Chapter" id="ChapterResult">
        <result property="id" column="id"/>
        <result property="courseId" column="course_id"/>
        <result property="title" column="title"/>
        <result property="sort" column="sort"/>
        <result property="taskId" column="task_id"/>
        <result property="reserveField2" column="reserve_field2"/>
        <result property="reserveField3" column="reserve_field3"/>
        <result property="gmtCreate" column="gmt_create"/>
        <result property="gmtModified" column="gmt_modified"/>
    </resultMap>

    <sql id="selectChapterVo">
        select id,
               course_id,
               title,
               sort,
               task_id,
               reserve_field2,
               reserve_field3,
               gmt_create,
               gmt_modified
        from edu_chapter
    </sql>

    <select id="selectChapterList" parameterType="Chapter" resultMap="ChapterResult">
        <include refid="selectChapterVo"/>
        <where>
            <if test="courseId != null  and courseId != ''">and course_id = #{courseId}</if>
            <if test="title != null  and title != ''">and title = #{title}</if>
            <if test="sort != null ">and sort = #{sort}</if>
            <if test="taskId != null  and taskId != ''">and task_id = #{taskId}</if>
            <if test="reserveField2 != null  and reserveField2 != ''">and reserve_field2 = #{reserveField2}</if>
            <if test="reserveField3 != null  and reserveField3 != ''">and reserve_field3 = #{reserveField3}</if>
            <if test="gmtCreate != null ">and gmt_create = #{gmtCreate}</if>
            <if test="gmtModified != null ">and gmt_modified = #{gmtModified}</if>
        </where>
    </select>

    <select id="selectChapterById" parameterType="String" resultMap="ChapterResult">
        <include refid="selectChapterVo"/>
        where id = #{id}
    </select>
    <select id="selectChapterByTaskId" resultType="com.lazy.vm.domain.vo.ChapterVo">
        select id, course_id courseId, title, sort, task_id taskId
        from edu_chapter
        where task_id = #{id}
    </select>

    <insert id="insertChapter" parameterType="Chapter">
        insert into edu_chapter
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">id,</if>
            <if test="courseId != null and courseId != ''">course_id,</if>
            <if test="title != null and title != ''">title,</if>
            <if test="sort != null">sort,</if>
            <if test="taskId != null and taskId != ''">task_id,</if>
            <if test="reserveField2 != null and reserveField2 != ''">reserve_field2,</if>
            <if test="reserveField3 != null and reserveField3 != ''">reserve_field3,</if>
            <if test="gmtCreate != null">gmt_create,</if>
            <if test="gmtModified != null">gmt_modified,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">#{id},</if>
            <if test="courseId != null and courseId != ''">#{courseId},</if>
            <if test="title != null and title != ''">#{title},</if>
            <if test="sort != null">#{sort},</if>
            <if test="taskId != null and taskId != ''">#{taskId},</if>
            <if test="reserveField2 != null and reserveField2 != ''">#{reserveField2},</if>
            <if test="reserveField3 != null and reserveField3 != ''">#{reserveField3},</if>
            <if test="gmtCreate != null">#{gmtCreate},</if>
            <if test="gmtModified != null">#{gmtModified},</if>
        </trim>
    </insert>

    <update id="updateChapter" parameterType="Chapter">
        update edu_chapter
        <trim prefix="SET" suffixOverrides=",">
            <if test="courseId != null and courseId != ''">course_id = #{courseId},</if>
            <if test="title != null and title != ''">title = #{title},</if>
            <if test="sort != null">sort = #{sort},</if>
            <if test="taskId != null and taskId != ''">task_id = #{taskId},</if>
            <if test="reserveField2 != null and reserveField2 != ''">reserve_field2 = #{reserveField2},</if>
            <if test="reserveField3 != null and reserveField3 != ''">reserve_field3 = #{reserveField3},</if>
            <if test="gmtCreate != null">gmt_create = #{gmtCreate},</if>
            <if test="gmtModified != null">gmt_modified = #{gmtModified},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteChapterById" parameterType="String">
        delete
        from edu_chapter
        where id = #{id}
    </delete>

    <delete id="deleteChapterByIds" parameterType="String">
        delete from edu_chapter where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>
